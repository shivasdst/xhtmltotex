%%importing packages
\usepackage[utf8]{inputenc}
\usepackage{fontspec,graphicx}
\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage{xstring}
\usepackage{polyglossia}

\setmainlanguage[numerals=Kannada]{kannada}
\setotherlanguages{english}

%%page settings for the book
\usepackage[papersize={140mm,215mm},textwidth=110mm,
textheight=170mm,headheight=6mm,headsep=4mm,topmargin=17.5mm,botmargin=1.15cm,
leftmargin=15mm,rightmargin=15mm,cropmarks,footskip=0.6cm]{zwpagelayout}

%%defining fonts
\setmainfont[
	Script=Kannada,
	BoldFont=SHREE-KAN-OTF-0850-Bold,
	ItalicFont=SHREE-KAN-OTF-0850-Italic,
	BoldItalicFont=SHREE-KAN-OTF-0850-Bold-Italic,
	HyphenChar="200C
]{SHREE-KAN-OTF-0850}

\newfontfamily\kannadafont[
	Script=Kannada,
	BoldFont=SHREE-KAN-OTF-0850-Bold,
	ItalicFont=SHREE-KAN-OTF-0850-Italic,
	BoldItalicFont=SHREE-KAN-OTF-0850-Bold-Italic,
	HyphenChar="200C
]{SHREE-KAN-OTF-0850}

\defaultfontfeatures{Ligatures=TeX}

\newfontfamily\englishfont[
	Script=Latin,
	Ligatures=TeX,
	BoldFont=GentiumBasic-Bold,
	ItalicFont=GentiumBasic-Italic,
	BoldItalicFont=GentiumBasic-BoldItalic,
]{GentiumBasic}


%%user defined commands
\long\def\bookTitle#1{\vfill\centerline{{\Huge\textbf{#1}}}\vfill}
\def\titleauthor#1{\centerline{{\Large\textbf{#1}}}\vfill}
\newenvironment{myquote}[1]{\medskip\par\bgroup\fontsize{10}{12}\selectfont\noindent\leftskip=10pt\rightskip=10pt#1}{\par\egroup\medskip}
\def\delimiter{\bigskip\centerline{*\quad*\quad*}\bigskip}
\def\general#1{#1}

\def\eng#1{{\englishfont\textenglish{#1}}}
\def\kan#1{{\kannadafont\textkannada{#1}}}



\newcommand{\arabictokannada}[1]%
{%
  \StrSubstitute{#1}{0}{೦}[\num]%
  \StrSubstitute{\num}{1}{೧}[\num]%
  \StrSubstitute{\num}{2}{೨}[\num]%
  \StrSubstitute{\num}{3}{೩}[\num]%
  \StrSubstitute{\num}{4}{೪}[\num]%
  \StrSubstitute{\num}{5}{೫}[\num]%
  \StrSubstitute{\num}{6}{೬}[\num]%
  \StrSubstitute{\num}{7}{೭}[\num]%
  \StrSubstitute{\num}{8}{೮}[\num]%
  \StrSubstitute{\num}{9}{೯}%
}

%%fancy header settings
\fancypagestyle{plain}{%
\chead[]{}
\lhead[]{}
\rhead[]{}
\cfoot[]{}
}
\lhead[{\fontsize{10}{12}\selectfont\arabictokannada{\thepage}}]{}
\rhead[]{{\fontsize{10}{12}\selectfont\arabictokannada{\thepage}}}
\chead[{\fontsize{10}{12}\selectfont ವೀರಸಂನ್ಯಾಸಿ ವಿವೇಕಾನಂದ}]{{\fontsize{10}{12}\selectfont\leftmark}}
\lfoot[]{}
\rfoot[]{}
\cfoot[]{}

\renewcommand{\headrulewidth}{0pt}

\pagestyle{fancy}


%%redefining macros
\renewcommand\chaptermark[1]{\markboth{#1}{}}
\def\addcontentsline#1#2#3{\addtocontents{#1}{\protect\contentsline{#2}{#3}{\protect\arabictokannada{\thepage}}}}
%~ \def\addcontentsline#1#2#3{\addtocontents{#1}{\protect\contentsline{#2}{#3}{\protect\arabictodevnag{\thepage}}}}
\makeatletter
\def\@chapter[#1]#2{\ifnum \c@secnumdepth >\m@ne
                       \if@mainmatter
                         \refstepcounter{chapter}%
                         \typeout{\@chapapp\space\thechapter.}%
                         \addcontentsline{toc}{chapter}%
                                   {\protect\numberline{\protect\arabictokannada{\thechapter}}#1}%
                       \else
                         \addcontentsline{toc}{chapter}{#1}%
                       \fi
                    \else
                      \addcontentsline{toc}{chapter}{#1}%
                    \fi
                    \chaptermark{#1}%
                    \addtocontents{lof}{\protect\addvspace{10\p@}}%
                    \addtocontents{lot}{\protect\addvspace{10\p@}}%
                    \if@twocolumn
                      \@topnewpage[\@makechapterhead{#2}]%
                    \else
                      \@makechapterhead{#2}%
                      \@afterheading
                    \fi}

\def\@makechapterhead#1{%
  {\parindent \z@ \centering \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \large\bfseries \kannadanumber{\thechapter}
        \par\nobreak
      \fi
    \fi
    \interlinepenalty\@M
    \LARGE\bfseries #1\par\nobreak
    \vskip 0.5\baselineskip
  }}

\renewenvironment{thebibliography}[1]
     {\@mkboth{\MakeUppercase\bibname}{\MakeUppercase\bibname}%
      \list{\@biblabel{\@arabic\c@enumiv}}%
           {\settowidth\labelwidth{\@biblabel{#1}}%
            \leftmargin\labelwidth
            \advance\leftmargin\labelsep
            \@openbib@code
            \usecounter{enumiv}%
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}}%
      \sloppy
      \clubpenalty4000
      \@clubpenalty \clubpenalty
      \widowpenalty4000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist}
  
\makeatother
\setcounter{tocdepth}{0} 
\renewcommand\contentsname{ಪರಿವಿಡಿ}

\tolerance=2000
%~ \parskip=40pt

\newcommand{\sethyphenation}[3][]{%
  \sbox0{\begin{otherlanguage}[#1]{#2}
    \hyphenation{#3}\end{otherlanguage}}}

%~ \hyphenchar\font=-1    
\input dictionary
